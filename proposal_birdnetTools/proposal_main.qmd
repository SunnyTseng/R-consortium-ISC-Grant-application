---
title: "birdnetTools 2.0: Linking BirdNET outputs to occupancy modeling in R"
author:
  - name: Sunny Tseng
    orcid: 0000-0002-8621-2244
    affiliations:
      - "University of Northern British Columbia"

  - name: Connor M. Wood
    orcid: 0000-0002-0235-5214
    affiliations:
      - "Cornell Laboratory of Ornithology"

date: today
date-format: iso
format:
  html:
    figure-dir: figure
    embed-resources: true
  pdf:
    figure-dir: figure
    geometry:
      - left=1.25in
      - right=1.25in
bibliography: references.bib

editor: visual
---

# Executive Summary

```{=html}
<!--
This section provides a condensed view of the entire proposal, one page long.
It should be a comprehensive high-level overview that captures the essence of the proposal, including its goals, methods, expected outcomes, deliverables, and budget.
-->
```

# Signatories

```{=html}
<!--
This section provides the ISC with a view of the support received from
the community for a proposal. Acceptance isn't predicated on
popularity but community acceptance is important. Willingness to
accept outside input is also a good marker for project delivery.

An optional section would be for R-Core signatories where changes to R
are proposed.
-->
```

## Project team

```{=html}
<!--
Who are the people responsible for actually delivering the project if
the proposal gets accepted and are already signed up and rearing to
go? Briefly describe all participants and the skills they will bring
to the project.
-->
```

##### Sunny (Yi-Chin) Tseng – PhD Candidate, University of Northern British Columbia, Canada

Sunny is an avian bioacoustic ecologist and the creator of `birdnetTools`, an R package for post-processing BirdNET output. Sunny’s expertise combines bioacoustics and quantitative ecology to monitor bird communities at landscape scales. She has conducted bird acoustic research in Siberia, Taiwan, Canada, and Lithuania, collecting audio recordings from over 300 species. For this project, Sunny will lead package development, maintain the repository, and update functions and documentation based on user feedback.

##### Connor M. Wood – Research Faculty, Cornell Lab of Ornithology

Connor leads the BirdNET Ecology Team, focusing on the application of BirdNET algorithms for landscape-scale biodiversity monitoring and community ecology. He has extensive experience developing and implementing bioacoustic tools to inform conservation strategies, and regularly uses BirdNET outputs as occupancy model inputs. For this project, Connor will provide expertise on occupancy modeling and statistical methods, ensuring the package outputs are ecologically relevant and meet the needs of end users.

## Consulted

```{=html}
<!--
Who has been given the opportunity to provide feedback on the
proposal? This should include any R Consortium & ISC members who the
proposal has been discussed with.

-   Stefan Kahl: creator of BirdNET; research faculty at the Cornell Laboratory of Ornithology & Chemnitz University of Technology

-   Felix Günther: creator of the `birdnetR` package which allows users to execute BirdNET within R

-   Jeff Doser: creator of the `spOccupancy` package; assistant professor at North Carolina State University

-->
```

# The Problem

```{=html}
<!--
Outlining the issue / weak point / problem to be solved by this
proposal. This should be a compelling section that sets the reader up
for the next section - the proposed solution!

It is important to cover:

 - [ ] What the problem is
 - [ ] Who it affects
 - [ ] Why is it a problem
 - [ ] What will solving the problem enable (why should it be solved)
 - [ ] Brief summary of existing work and previous attempts (e.g., relevant R packages)
 - [ ] If proposing changes to R itself: letter of support from R Core member
-->
```

BirdNET is the most widely used algorithm for automated bird species identification from audio recordings, which can identify more than 6,000 species, most of them birds, from audio data, making it a powerful tool for large-scale avian monitoring [@kahl:2021]. R packages such as `birdnetR` (to run BirdNET) [@gunther:2025] and `birdnetTools` (for post-processing BirdNET outputs) [@tseng:2025r] allow users to streamline acoustic data analysis. One of the most fundamental applications of BirdNET detections is generating species presence/absence data across sites and time periods for occupancy modeling, which provides essential information on species distribution, detectability, and probability of occurrence (e.g., @wood:2023). However, preparing BirdNET outputs to become occupancy model inputs is often challenging, particularly for ecologists without extensive programming experience. Existing R tools for occupancy modelling, like `unmarked`, `ubms`, and `spOccupancy` [@doser:2022], require data in very specific formats and involve complex, multi-step workflows, creating barriers to efficient and reproducible analysis.

This project aims to reduce or eliminate the current gap between the generation of animal encounter data by BirdNET and the use of that data in statistical models. Specifically, we will improve and expand the functionality of `birdnetTools` to facilitate the converstion of raw BirdNET outputs into usable population data. Because `birdnetTools` already offers generic tools for data wrangling, summarization, and validation, it is the natural point in the audio-to-inference pipeline for necessary improvements. We will exand the featureset of `birdnetTools` to provide streamlined workflows specifically tailored for occupancy modeling. By designing functions that automate the transformation of BirdNET outputs into formats compatible with occupancy modeling packages, we can significantly reduce the technical burden on users, enabling ecologists and conservation practitioners to more easily leverage passive acoustic monitoring data for occupancy analyses and generate reproducible ecological insights.

# The proposal

```{=html}
<!--
How are you going to solve the problem? Include the concrete actions you
will take and an estimated timeline. What are likely failure modes and
how will you recover from them?

This is where the proposal should be outlined.
-->
```

## Overview

```{=html}
<!--
At a high-level address what your proposal is and how it will address
the problem identified. Highlight any benefits to the R Community that
follow from solving the problem. This should be your most compelling
section.

Include concrete actions you will take and estimated timeline.
-->
```

```{=html}
<!--
What does the high-level architecture look like?
-->
```

The proposed solution expands `birdnetTools` functions to transform species detections (output from `birdnetR`) into presence/absence detection matrix (input for `spOccupancy`). This adds a new data-wrangling path to the existing workflow, as illustrated in @fig-workflow A. Occupancy modeling requires three key data components:

-   **Detection matrix** (sites × surveys) indicating species presence (1) or absence (0).
-   **Site covariates** (sites × covariates), such as habitat type, elevation, or other site-level descriptors.
-   **Survey covariates** (sites × surveys × covariates), such as weather conditions, time of day.

New functions will streamline the creation of the **detection matrix** by building on existing `birdnetTools` capabilities (e.g., data import, cleaning, validation) and adding tools to extract site and survey information, aggregate detections, and reshape outputs into the formats required by `spOccupancy`. The proposed workflow is shown in @fig-workflow B. 

![Workflow from raw audio files to occupancy models. Black arrows and graphics represent the current workflow, while red text and arrows indicate the proposed extensions for the package expansion.](./figure/architecture_1.jpg){#fig-workflow fig-align="center" width="80%"}

## Minimum viable product and external dependencies

```{=html}
<!--
Go into more detail about the specifics of the project and how it delivers
against the problem.

Depending on project type the detail section should include:
-->
```

```{=html}
<!--
What is the smallest thing you can build that delivers value to your users?
-->
```

The minimum viable product will be a single function, `birdnetTools::birdnet_add_site()`, which extracts and processes site-level information from BirdNET outputs. This function is essential for creating the detection matrix required for occupancy modeling. Over time, it will be integrated with additional tools and expanded to support the full suite of `spOccupancy` functions (`PGOcc()`, `spPGOcc()`, `spMsPGOcc()`, and `msPGOcc()`), enabling single- and multi-species spatial modeling.

Connor's alt text:
The minimum viable product will be a single function, `birdnetTools::birdnet_det_mat()`, which converts BirdNET outputs into a **detection matrix** format - the critical missing piece in the existing software ecosystem. In short, BirdNET outputs are indefinitely long, with individual rows containing species predictions with associated metatdata. `birdnetTools` can already extract date and time information and compile species-by-species tables. Building on these capabilities, we will enable the streamlined conversion of the long-format output tables into the more consolidate site*day bins containing 1s (species observed above a specified score), 0s (audio recorded but no predictions above a specificed score), and NAs (no audio recorded during that interval). That table, the **detection matrix**, can readily be ingested by `spOccupancy`(e.g., functions `PGOcc()` and `spPGOcc()`) and `unmarked` (e.g., function `occu()`; package `ubms` works direclty with `unmarked` input objects so no further adaptation would be required). 

```{=html}
<!--
What external dependencies does the project have (e.g. libraries, services, other projects, etc.)?
-->
```

`birdnetTools` relies on several R packages to support its core functionality, including `av`, `tuneR`, and `seewave` for audio processing, and `dplyr` for data wrangling. A full list of dependencies is available in the `DESCRIPTION` file of the [`birdnetTools` repository](https://github.com/birdnet-team/birdnetTools).

# Project plan

## Start-up phase

```{=html}
<!--
Covering the planning phase, this section should provide a relatively
detailed plan of how work will start on the project. This section is
important because projects need to get up and running quickly.


 - [ ] Setting up collaboration platform inc. code for contributors etc.
 - [ ] Licence decisions
 - [ ] Reporting framework
-->
```

The planning phase will be completed within the first month of the project:

-   [ ] Confirm and document open-source license (MIT).

-   [ ] Set up GitHub repository with contribution guidelines, code of conduct, and issue templates.

-   [ ] Establish reporting and feedback workflow via GitHub Issues/Discussions.

-   [ ] Draft initial project roadmap and share with collaborators for feedback.

-   [ ] Schedule bi-weekly check-ins between project contributors.

## Technical delivery

```{=html}
<!--
Covering the actual delivery of the project this section should
provide at least a high-level description of the implementation.

Including target dates is really important as you need to be committed
and the ISC need to have a means of tracking delivery
-->
```

The technical delivery phase will span months 2 to 5 of the project. Key milestones include:

-   [ ] Month 2.: Finalize function specifications and data format requirements in collaboration with `spOccupancy` developers.

-   [ ] Month 3: Develop and test initial versions of occupancy-specific functions in `birdnetTools` (i.e., the minimum viable product).

-   [ ] Month 4: Create example workflows and vignettes demonstrating end-to-end analyses.

-   [ ] Month 5: Conduct community testing, gather feedback, refine functions, and prepare for package release.

-   [ ] Long term: The package will be distributed via CRAN and/or the rOpenSci R-universe to ensure broad accessibility for R users worldwide.

-   [ ] Long term: Project updates and outcomes will be communicated through posts on the R Consortium blog, as well as via relevant R community events (e.g., useR! conference, ISC meetings).

```{=html}
<!--

## Other aspects

How will you ensure that your work is available to the widest number
of people? Please specify the open-source or creative commons license(s)
you will use, how you will host your code so that others can contribute,
and how you will publicize your work. We encourage you to plan content
to be shared quarterly on the R Consortium blog.

 - [ ] Announcement post
 - [ ] Delivery blog post
 - [ ] Social media
 - [ ] UseR!
 - [ ] ISC meetings
-->
```

## Budget & funding plan

```{=html}
<!--
Outline the milestones for development and how much funding will be
required for each stage (as payments will be tied to project milestone
completion). Each milestone should specify the work to be done and the
expected outcomes, providing enough detail for the ISC to understand
the scope of the project work and assess the likelihood of success.

We expect that most of the budget will be allocated
for labor costs. We do not cover indirect costs. The ISC grants cannot
cover such things as travel, lodging, food, journal publication fees,
or personal hardware. Cloud services may be covered if they are specific
to the project and the project period. The ISC reserves the right to vet
how funds are used for each project separately. If in doubt, please reach
out to us.
-->
```

The requested funds will primarily support personnel time for development, testing, and documentation of the new `birdnetTools` functionality. Costs are estimated for a five-month project divided into three milestones tied to deliverables.

| Milestone | Timeline | Deliverables | Estimated cost (USD) |
|----|----|----|----|
| Phase 1 - Consultation | 2025 Dec.1 - 31 | Meet with spOccupancy developers/users to finalize data formats and function specs. | \$704 |
| Phase 2 - Development  | 2026 Jan.1 - Mar.31 | Implement core functions, create example workflows. | \$3,488 |
| Phase 3 - Testing & release | 2026 Apr.1 - 30 | Conduct community testing, refine code and documentation | \$1,706 |
| Total |  |  | \$5,952 |



# Success

```{=html}
<!--
Projects should have a definition of done that is measurable, and a
thorough understanding going in of what the risks are to delivery
-->
```

## Definition of done

```{=html}
<!--
What does success look like?
-->
```

## Measuring success

```{=html}
<!--
How will we know when success is achieved, what markers can we use
along the way
-->
```

## Future work

```{=html}
<!--
How could this be extended / developed in the future by yourself
and/or the community in general?
-->
```

::: refs
:::
