---
title: "birdnetTools 2.0: Linking BirdNET outputs to occupancy modeling in R"
author:
  - name: Sunny Tseng
    orcid: 0000-0002-8621-2244
    affiliations:
      - "Natural Resources & Environmental Studies, University of Northern British Columbia"

  - name: Connor M. Wood
    orcid: 0000-0002-0235-5214
    affiliations:
      - "K. Lisa Yang Center for Conservation Bioacoustics, Cornell Laboratory of Ornithology"

date: today
date-format: iso
format:
  pdf:
    figure-dir: figure
    geometry:
      - left=1.25in
      - right=1.25in
bibliography: references.bib

editor: visual
---

# Executive Summary

```{=html}
<!--
This section provides a condensed view of the entire proposal, one page long.
It should be a comprehensive high-level overview that captures the essence of the proposal, including its goals, methods, expected outcomes, deliverables, and budget.
-->
```

Passive acoustic monitoring, using sound recorders to monitor wildlife, is transforming how scientists study biodiversity. Machine learning tools such as BirdNET, one of the most advanced algorithms available, can automatically identify bird species from thousands of hours of audio recordings. A powerful way to use these data is through occupancy modeling, which estimates where species occur and how likely they are to be detected. However, converting BirdNET’s raw output into the structured format required for occupancy analysis in R remains a major hurdle for many ecologists.

`birdnetTools` 2.0 will remove this barrier by expanding the existing `birdnetTools` R package to produce detection matrices ready for three of the most widely used occupancy modeling packages: `spOccupancy`, `unmarked`, and `ubms`. Building on current tools for data import, cleaning, and validation, we will create new core function(s) (e.g., `birdnet_det_mat()`) and user-friendly, step-by-step tutorials. This upgrade will make it far easier to move from raw audio to reproducible occupancy estimates, empowering researchers and conservationists to monitor birds at large scales and strengthen the R ecosystem for biodiversity science.

# Signatories (project team)

```{=html}
<!--
This section provides the ISC with a view of the support received from
the community for a proposal. Acceptance isn't predicated on
popularity but community acceptance is important. Willingness to
accept outside input is also a good marker for project delivery.

An optional section would be for R-Core signatories where changes to R
are proposed.
-->
```

```{=html}

<!--

## Project team

Who are the people responsible for actually delivering the project if
the proposal gets accepted and are already signed up and rearing to
go? Briefly describe all participants and the skills they will bring
to the project.
-->
```

##### Sunny (Yi-Chin) Tseng – PhD Candidate, University of Northern British Columbia

Sunny is an avian bioacoustic ecologist and the creator of `birdnetTools`, an R package for post-processing BirdNET output. Sunny’s expertise combines bioacoustics and quantitative ecology to monitor bird communities at landscape scales. She has conducted bird acoustic research in Siberia, Taiwan, Canada, and Lithuania, collecting audio recordings from over 300 species. For this project, Sunny will lead package development, maintain the repository, and update functions and documentation based on user feedback.

##### Connor M. Wood – Research Faculty, Cornell Lab of Ornithology

Connor is a researcher with the K. Lisa Yang Center for Conservation Bioacoustics with the Cornell Lab of Ornithology. His research focuses on population ecology and conservation biology, and his team generally applies machine learning tools to extract biodiversity data from large-scale audio datasets. He has extensive experience developing and implementing bioacoustic tools to inform conservation strategies, and regularly uses BirdNET outputs as occupancy model inputs. For this project, Connor will provide expertise on occupancy modeling and statistical methods, ensuring the package outputs are ecologically relevant and meet the needs of end users.

```{=html}
<!--

## Consulted

Who has been given the opportunity to provide feedback on the
proposal? This should include any R Consortium & ISC members who the
proposal has been discussed with.

-   Stefan Kahl: creator of BirdNET; research faculty at the Cornell Laboratory of Ornithology & Chemnitz University of Technology

-   Felix Günther: creator of the `birdnetR` package which allows users to execute BirdNET within R

-   Jeff Doser: creator of the `spOccupancy` package; assistant professor at North Carolina State University

-->
```

# The Problem

```{=html}
<!--
Outlining the issue / weak point / problem to be solved by this
proposal. This should be a compelling section that sets the reader up
for the next section - the proposed solution!

It is important to cover:

 - [ ] What the problem is
 - [ ] Who it affects
 - [ ] Why is it a problem
 - [ ] What will solving the problem enable (why should it be solved)
 - [ ] Brief summary of existing work and previous attempts (e.g., relevant R packages)
 - [ ] If proposing changes to R itself: letter of support from R Core member
-->
```

BirdNET is the most widely used algorithm for automated bird species identification from audio recordings, capable of recognizing more than 6,000 species [@kahl:2021]. R packages such as `birdnetR` (for running BirdNET) [@gunther:2025] and `birdnetTools` (for post-processing BirdNET outputs) [@tseng:2025r] streamline acoustic data analysis. A key application of BirdNET outputs is generating species presence–absence data for occupancy modeling, which provides estimates of species distribution, detectability, and occurrence (e.g., @wood:2023). However, preparing BirdNET outputs for these models is challenging, especially for users without advanced programming skills. Existing R packages for occupancy analysis, including `unmarked` [@fiske:2011], `ubms` [@kellner:2021], and `spOccupancy` [@doser:2022], require highly specific data formats and multi-step workflows, creating barriers to efficient and reproducible analysis.

This project aims to reduce the gap between BirdNET’s raw detection tables and the structured inputs required by occupancy models. By enhancing `birdnetTools`, which already handles data import, cleaning, and summarization, we will add function(s) to transform BirdNET predictions into detection matrices and provide streamlined workflows specifically tailored for occupancy modeling. By facilitating the linkage of existing R packages, this project will enable ecologists and conservation practitioners to move from raw audio to model-ready data with minimal effort.

# The proposal

```{=html}
<!--
How are you going to solve the problem? Include the concrete actions you
will take and an estimated timeline. What are likely failure modes and
how will you recover from them?

This is where the proposal should be outlined.
-->
```

## Overview

```{=html}
<!--
At a high-level address what your proposal is and how it will address
the problem identified. Highlight any benefits to the R Community that
follow from solving the problem. This should be your most compelling
section.

Include concrete actions you will take and estimated timeline.
-->
```

```{=html}
<!--
What does the high-level architecture look like?
-->
```

We will expand `birdnetTools` functions to transform BirdNET detections into presence/absence detection matrix (input for `spOccupancy`, `unmarked`, and `ubms`). This data-wrangling path links related but currently disconnected R packages, as illustrated in @fig-workflow A. BirdNET generates animal observations, which ccupancy modeling require in a specific format, the **detection matrix**, which is a (sites × surveys) matrix indicating species presence or absence.

New function(s) will streamline the creation of the **detection matrix** by building on existing `birdnetTools` capabilities (e.g., data import, cleaning, validation) and adding tools to extract site and survey information (which can optionally be added to an occupancy model), aggregate detections, and reshape outputs into the formats required by three of the most common R-based occupancy modeling packages, `spOccupancy`, `unmarked`, and `ubms`. The proposed workflow is shown in @fig-workflow B.

![Workflow from raw audio files to occupancy models. Black arrows and graphics represent the current workflow, while red text and arrows indicate the proposed extensions for the package expansion.](./figure/architecture_1.jpg){#fig-workflow fig-align="center" width="80%"}

## Minimum viable product and external dependencies

```{=html}
<!--
Go into more detail about the specifics of the project and how it delivers
against the problem.

Depending on project type the detail section should include:
-->
```

```{=html}
<!--
What is the smallest thing you can build that delivers value to your users?
-->
```

The minimum viable product will be a core function, `birdnet_det_mat()`, which converts BirdNET’s long-format prediction tables into a site × survey **detection matrix**, the critical missing piece in the existing software ecosystem. This matrix will contain 1s (species detected above a specified confidence score), 0s (audio recorded but no qualifying detections), and NAs (no recording during that interval). That table, the **detection matrix**, can readily be ingested by `spOccupancy`, `unmarked`, or `ubms` (e.g., via functions `PGOcc()`, `occu()`, or `stan_occu()`, respectively).

```{=html}
<!--
What external dependencies does the project have (e.g. libraries, services, other projects, etc.)?
-->
```

`birdnetTools` relies on several R packages to support its core functionality, including `av`, `tuneR`, and `seewave` for audio processing, and `dplyr` for data wrangling. A full list of dependencies is available in the `DESCRIPTION` file of the [`birdnetTools` repository](https://github.com/birdnet-team/birdnetTools).

# Project plan

## Start-up phase

```{=html}
<!--
Covering the planning phase, this section should provide a relatively
detailed plan of how work will start on the project. This section is
important because projects need to get up and running quickly.


 - [ ] Setting up collaboration platform inc. code for contributors etc.
 - [ ] Licence decisions
 - [ ] Reporting framework
-->
```

The planning phase will be completed within the first month of the project:

-   [ ] Confirm and document open-source license (MIT).

-   [ ] Set up GitHub repository with contribution guidelines, code of conduct, and issue templates.

-   [ ] Establish reporting and feedback workflow via GitHub Issues/Discussions.

-   [ ] Draft initial project roadmap and share with collaborators for feedback.

-   [ ] Schedule bi-weekly check-ins between project contributors.

## Technical delivery

```{=html}
<!--
Covering the actual delivery of the project this section should
provide at least a high-level description of the implementation.

Including target dates is really important as you need to be committed
and the ISC need to have a means of tracking delivery
-->
```

The technical delivery phase will span months 2 to 5 of the project. Key milestones include:

-   [ ] Month 2.: Finalize function specifications and data format requirements in collaboration with `spOccupancy` developers.

-   [ ] Month 3: Develop and test initial versions of occupancy-specific functions in `birdnetTools` (i.e., the minimum viable product).

-   [ ] Month 4: Create example workflows and vignettes demonstrating end-to-end analyses.

-   [ ] Month 5: Conduct community testing, gather feedback, refine functions, and prepare for package release.

-   [ ] Long term: The package will be distributed via CRAN and/or the rOpenSci R-universe to ensure broad accessibility for R users worldwide.

-   [ ] Long term: Project updates and outcomes will be communicated through posts on the R Consortium blog, as well as via relevant R community events (e.g., useR! conference, ISC meetings).

```{=html}
<!--

## Other aspects

How will you ensure that your work is available to the widest number
of people? Please specify the open-source or creative commons license(s)
you will use, how you will host your code so that others can contribute,
and how you will publicize your work. We encourage you to plan content
to be shared quarterly on the R Consortium blog.

 - [ ] Announcement post
 - [ ] Delivery blog post
 - [ ] Social media
 - [ ] UseR!
 - [ ] ISC meetings
-->
```

## Budget & funding plan

```{=html}
<!--
Outline the milestones for development and how much funding will be
required for each stage (as payments will be tied to project milestone
completion). Each milestone should specify the work to be done and the
expected outcomes, providing enough detail for the ISC to understand
the scope of the project work and assess the likelihood of success.

We expect that most of the budget will be allocated
for labor costs. We do not cover indirect costs. The ISC grants cannot
cover such things as travel, lodging, food, journal publication fees,
or personal hardware. Cloud services may be covered if they are specific
to the project and the project period. The ISC reserves the right to vet
how funds are used for each project separately. If in doubt, please reach
out to us.
-->
```

We request funding to support personnel time for developing, testing, and documenting the new `birdnetTools` functionality. Estimated costs are based on a five-month project divided into three deliverable-based milestones, calculated at an hourly rate of **USD 36/hour**.

| Milestone | Deliverables | Hours (Sunny + Connor) | Estimated cost (USD) |
|------------------|------------------|------------------|------------------|
| Phase 1 Planning (2025 Dec.1 - 31) | Finalize data formats and function specs. | 12 + 12 | \$864 |
| Phase 2 Development (2026 Jan.1 - Mar.31) | Implement core functions, create example workflows. | 80 + 16 | \$3,456 |
| Phase 3 Testing & release (2026 Apr.1 - 30) | Conduct community testing, refine code and documentation | 60 + 28 | \$3,168 |
| Total |  | 152 + 56 = 208 | \$7,488 |

# Success

```{=html}
<!--
Projects should have a definition of done that is measurable, and a
thorough understanding going in of what the risks are to delivery
-->
```

This project will be considered successful when `birdnetTools` 2.0 provides a stable, CRAN-ready release that enables users to convert BirdNET output into detection matrices and fit occupancy models in `spOccupancy`, `unmarked`, or `ubms` with minimal additional coding. Success will be measured by (1) the release of the new core function(s) (e.g., `birdnet_det_mat()`) and accompanying vignettes, (2) positive feedback and reproducible test results from community beta testing, and (3) adoption of the new workflow by early users as demonstrated through GitHub issues, discussions, and citations.

Building on the proposed detection-matrix functionality, a logical next step will be to develop additional helper functions that support occupancy model covariates. For example, a `birdnet_effort_mat()` function could generate a matrix with the same site × survey dimensions as the detection matrix but populated with the number of input audio files per interval. This “effort matrix” would provide a straightforward detection covariate for occupancy modeling and further streamline the workflow from raw audio to model-ready inputs.

```{=html}

<!--
## Definition of done

What does success look like?
-->
```

```{=html}
<!--
## Measuring success

How will we know when success is achieved, what markers can we use
along the way
-->
```

```{=html}
<!--
## Future work

How could this be extended / developed in the future by yourself
and/or the community in general?
-->
```

::: refs
:::
